{"version":3,"sources":["FixedView.ts"],"names":[],"mappings":";;;;;AAAA,uCAAkC;AAElC,2DAA2D;AAC3D,kDAAkD;AAElD,QAAQ;AAEF,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAK5C;IAAuC,6BAAY;IAAnD;;IAqCA,CAAC;IApCG,0BAAM,GAAN;QACI,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAEO,iCAAa,GAArB;QACI,IAAI,OAAO,EAAE,IAAI,WAAW;YACxB,OAAO;QAEV,SAAS;QACT,IAAI,MAAM,GAAG,CAAC,CAAC;QAEhB,UAAU;QACV,IAAI,EAAE,CAAC,+BAA+B,EAAE;YACpC,yBAAyB;YACzB,IAAI,MAAM,GAAG,EAAE,CAAC,+BAA+B,EAAE,CAAC;YAClD,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC;SACvB;QAED,IAAI,QAAQ,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QACtC,IAAI,IAAI,GAAG,EAAE,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;QAClC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QACrC,IAAI,KAAK,GAAG,CAAC,GAAG,EAAE,EAAE;YAChB,KAAK;YACL,IAAI,MAAM,GAAG,KAAK,EAAE;gBAChB,MAAM;gBACN,MAAM,GAAG,MAAM,GAAG,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC;aACxC;;gBACG,MAAM,GAAG,CAAC,CAAC;YACf,QAAQ,CAAC,MAAM,GAAG,GAAG,GAAG,KAAK,GAAG,MAAM,CAAC;YACvC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YACjD,kBAAQ,CAAC,SAAS,GAAG,MAAM,GAAG,CAAC,CAAC;SACnC;;YAEG,QAAQ,CAAC,KAAK,GAAG,IAAI,GAAG,KAAK,CAAC;QAClC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;IACvC,CAAC;IApCgB,SAAS;QAD7B,OAAO;OACa,SAAS,CAqC7B;IAAD,gBAAC;CArCD,AAqCC,CArCsC,EAAE,CAAC,SAAS,GAqClD;kBArCoB,SAAS","file":"","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["import RootNode from \"./RootNode\";\r\n\r\n// Copyright (C) 2019, Flickering Inc. All rights reserved.\r\n// Author: hongchangfu (hongchangfu@flickering.ai)\r\n\r\n//用于界面适配\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\ndeclare const wx: any;\r\n\r\n@ccclass\r\nexport default class FixedView extends cc.Component {\r\n    onLoad() {\r\n        this.fixedViewSize();\r\n    }\r\n\r\n    private fixedViewSize() {\r\n        if (typeof wx == \"undefined\")\r\n            return;\r\n\r\n         //菜单按钮上边界\r\n         let height = 0;\r\n\r\n        //低版本可能没接口\r\n        if (wx.getMenuButtonBoundingClientRect) {\r\n            //获取菜单按钮（右上角胶囊按钮）的布局位置信息。\r\n            let object = wx.getMenuButtonBoundingClientRect();\r\n            height = object.top;\r\n        }\r\n\r\n        let nodeSize = new cc.Size(720, 1280);\r\n        let size = cc.view.getFrameSize();\r\n        let scale = size.width / size.height;\r\n        if (scale < 9 / 16) {\r\n            //有额头\r\n            if (height > 5.625) {\r\n                //比例换算\r\n                height = height * 1280 / size.height;\r\n            } else\r\n                height = 0;\r\n            nodeSize.height = 720 / scale - height;\r\n            this.node.position = new cc.Vec2(0, -height / 2);\r\n            RootNode.fixHeight = height / 2;\r\n        }\r\n        else\r\n            nodeSize.width = 1280 * scale;\r\n        this.node.setContentSize(nodeSize);\r\n    }\r\n}"]}