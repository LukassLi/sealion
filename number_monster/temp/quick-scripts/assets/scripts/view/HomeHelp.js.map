{"version":3,"sources":["HomeHelp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\view","sourcesContent":["// Copyright (C) 2019, Flickering Inc. All rights reserved.\r\n// Author: hongchangfu (hongchangfu@flickering.ai)\r\n\r\n//首页的帮助界面\r\n\r\nimport MySound, { AudioType } from \"../MySound\";\r\nimport RootNode from \"../RootNode\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HomeHelp extends cc.Component {\r\n    @property({ type: [cc.Node], visible: true, displayName: \"表示哪一页的三个点\" })\r\n    private spotArr: Array<cc.Node> = [];\r\n\r\n    @property({ type: cc.Node, visible: true, displayName: \"下一步还是开始按钮\" })\r\n    private stepNode: cc.Node = undefined;\r\n\r\n    @property({ type: cc.Node, visible: true, displayName: \"内容\" })\r\n    private contentNode: cc.Node = undefined;\r\n\r\n    @property({ type: cc.Node, visible: true, displayName: \"滑动节点\" })\r\n    private scrollNode: cc.Node = undefined;\r\n\r\n    @property({ type: cc.Node, visible: true, displayName: \"返回按钮\" })\r\n    private backBtn: cc.Node = undefined;\r\n\r\n    @property({ type: [cc.SpriteFrame], visible: true, displayName: \"按钮图片\" })\r\n    private btnSpriteFrameArr: Array<cc.SpriteFrame> = [];\r\n\r\n    /** 点的颜色 1为当前的颜色 */\r\n    private spotColor: Array<cc.Color> = [cc.color(227, 212, 175), cc.color(173, 184, 96)];\r\n\r\n    /** 第几个界面 */\r\n    private step: number = 0;\r\n\r\n    /** 是否在移动,移动时不能点下一步按钮 */\r\n    private isMove: boolean = false;\r\n\r\n    start() {\r\n        this.backBtn.on('click', () => {\r\n            this.node.active = false;\r\n        })\r\n\r\n        this.stepNode.on('click', () => {\r\n            if (!this.isMove)\r\n                this.stepbtn();\r\n        })\r\n\r\n        this.scrollNode.on(cc.Node.EventType.TOUCH_START, () => {\r\n            this.contentNode.stopAllActions();\r\n        }, this)\r\n\r\n        this.scrollNode.on(cc.Node.EventType.TOUCH_END, () => {\r\n            this.touchEnd();\r\n        }, this)\r\n\r\n        this.scrollNode.on(cc.Node.EventType.TOUCH_CANCEL, () => {\r\n            this.touchEnd();\r\n        }, this)\r\n\r\n        let size = this.scrollNode.getContentSize();\r\n        if (size.height > 1000)\r\n            size.height = 1000;\r\n        this.scrollNode.setContentSize(size);\r\n    }\r\n\r\n    /**\r\n     * 打开\r\n     */\r\n    public open() {\r\n        this.node.active = true;\r\n        this.contentNode.stopAllActions();\r\n        this.contentNode.position = cc.Vec2.ZERO;\r\n        this.initStep();\r\n\r\n    }\r\n\r\n    /**\r\n     * 下一步按钮\r\n     */\r\n    private stepbtn() {\r\n        MySound.instance.playAudio(AudioType.Button);\r\n        if (this.step == 2)\r\n            RootNode.instance.loadScene(\"game\");\r\n        else\r\n            this.stepAction(this.step + 1);\r\n\r\n    }\r\n\r\n    /**\r\n     * 触碰结束\r\n     */\r\n    private touchEnd() {\r\n        let index = this.contentNode.position.x < -this.step * 670 ? this.step + 1 : this.step - 1;\r\n        if (index < 0||index>2)\r\n            return;\r\n    \r\n        this.stepAction(index);\r\n    }\r\n\r\n    /**\r\n     * 滑动\r\n     * @param index 滑动到第几步\r\n     */\r\n    private stepAction(index: number) {\r\n        this.contentNode.stopAllActions();\r\n\r\n        let positionX = this.contentNode.position.x;\r\n        let target = -index * 670;\r\n        let disparity = Math.abs(positionX - target);\r\n\r\n        this.isMove = true;\r\n        let action = cc.sequence([\r\n            cc.moveTo(disparity / 670 * 0.3, new cc.Vec2(target, 0)),\r\n            cc.callFunc(() => {\r\n                this.initStep(index);\r\n            })\r\n        ])\r\n        this.contentNode.runAction(action);\r\n    }\r\n\r\n    /**\r\n     * 步骤设置\r\n     * @param index 第几步\r\n     */\r\n    private initStep(index: number = 0) {\r\n        this.step = index;\r\n        //设置点的颜色\r\n        for (let i = 0; i < 3; i++) {\r\n            if (i == index)\r\n                this.spotArr[i].color = this.spotColor[1];\r\n            else\r\n                this.spotArr[i].color = this.spotColor[0];\r\n        }\r\n\r\n        let num = index == 2 ? 1 : 0;\r\n        let sprite = this.stepNode.getComponent(cc.Sprite);\r\n        sprite.spriteFrame = this.btnSpriteFrameArr[num];\r\n        this.isMove = false;\r\n    }\r\n}"]}