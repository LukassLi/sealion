{"version":3,"sources":["Load.ts"],"names":[],"mappings":";;;;AAAA,2DAA2D;AAC3D,kDAAkD;;AAElD,YAAY;AAEZ,wCAAmC;AAE7B,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAAkC,wBAAY;IAD9C;QAAA,qEAmDC;QAhDW,SAAG,GAAY,SAAS,CAAC;QAGzB,aAAO,GAAY,SAAS,CAAC;QAG7B,eAAS,GAAY,SAAS,CAAC;QAEvC,aAAa;QACL,WAAK,GAAW,GAAG,CAAC;QACpB,UAAI,GAAW,CAAC,CAAC;QACjB,UAAI,GAAW,CAAC,CAAC;QAEjB,iBAAW,GAAW,CAAC,CAAC;;IAmCpC,CAAC;IAjCG,oBAAK,GAAL;QACI,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,QAAQ,GAAG;YACX,IAAI,CAAC,WAAW,IAAI,CAAC,CAAC;YACtB,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,EAAE;gBACvB,kBAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;aAChC;QACL,CAAC,CAAA;QAED,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YAC1D,QAAQ,EAAE,CAAC;QACf,CAAC,CAAC,CAAA;QACF,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YAC1D,QAAQ,EAAE,CAAC;QACf,CAAC,CAAC,CAAA;QAEF,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,kBAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC;QAC/C,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,kBAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC;IACpD,CAAC;IAED,0BAAW,GAAX,UAAY,cAAsB,EAAE,UAAkB,EAAE,IAAS;QAC7D,IAAI,CAAC,IAAI,GAAG,cAAc,GAAG,UAAU,CAAC;QACxC,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAED,0BAAW,GAAX,UAAY,cAAsB,EAAE,UAAkB,EAAE,IAAS;QAC7D,IAAI,CAAC,IAAI,GAAG,cAAc,GAAG,UAAU,CAAC;QACxC,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAEO,yBAAU,GAAlB;QACI,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;IACvD,CAAC;IA/CD;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC;qCAC9B;IAGjC;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,MAAM,EAAE,CAAC;yCAC3B;IAGrC;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,MAAM,EAAE,CAAC;2CACzB;IARtB,IAAI;QADxB,OAAO;OACa,IAAI,CAkDxB;IAAD,WAAC;CAlDD,AAkDC,CAlDiC,EAAE,CAAC,SAAS,GAkD7C;kBAlDoB,IAAI","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\controller","sourcesContent":["// Copyright (C) 2019, Flickering Inc. All rights reserved.\r\n// Author: hongchangfu (hongchangfu@flickering.ai)\r\n\r\n//loading 界面\r\n\r\nimport RootNode from \"../RootNode\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Load extends cc.Component {\r\n    @property({ type: cc.Node, visible: true, displayName: \"进度条\" })\r\n    private bar: cc.Node = undefined;\r\n\r\n    @property({ type: cc.Node, visible: true, displayName: \"成人标题\" })\r\n    private manNode: cc.Node = undefined;\r\n\r\n    @property({ type: cc.Node, visible: true, displayName: \"儿童标题\" })\r\n    private childNode: cc.Node = undefined;\r\n\r\n    /** 进度条的长度 */\r\n    private width: number = 520;\r\n    private pro1: number = 0;\r\n    private pro2: number = 0;\r\n\r\n    private finishCount: number = 0;\r\n\r\n    start() {\r\n        let self = this;\r\n        let callback = function () {\r\n            self.finishCount += 1;\r\n            if (self.finishCount == 2) {\r\n                RootNode.instance.loadJump();\r\n            }\r\n        }\r\n\r\n        cc.director.preloadScene(\"home\", this.onProgress1.bind(this), () => {\r\n            callback();\r\n        })\r\n        cc.director.preloadScene(\"game\", this.onProgress2.bind(this), () => {\r\n            callback();\r\n        })\r\n\r\n        this.manNode.active = !RootNode.instance.isKid;\r\n        this.childNode.active = RootNode.instance.isKid;\r\n    }\r\n\r\n    onProgress1(completedCount: number, totalCount: number, item: any) {\r\n        this.pro1 = completedCount / totalCount;\r\n        this.onProgress();\r\n    }\r\n\r\n    onProgress2(completedCount: number, totalCount: number, item: any) {\r\n        this.pro2 = completedCount / totalCount;\r\n        this.onProgress();\r\n    }\r\n\r\n    private onProgress() {\r\n        this.bar.width = (this.pro1 + this.pro2) / 2 * 520;\r\n    }\r\n}"]}