{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\view/assets\\scripts\\view\\ComBo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\view","sourcesContent":["// Copyright (C) 2019, Flickering Inc. All rights reserved.\r\n// Author: hongchangfu (hongchangfu@flickering.ai)\r\n\r\n//连击设置\r\n\r\nimport GameCtrl from \"../controller/GameCtrl\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nconst enum ComboState {\r\n    normal = 0,\r\n    crazy = 1,\r\n}\r\n\r\n@ccclass\r\nexport default class ComBo extends cc.Component {\r\n    @property({ type: cc.Node, visible: true, displayName: \"普通完成\" })\r\n    public normalNode: cc.Node = undefined;\r\n\r\n    @property({ type: cc.Node, visible: true, displayName: \"连击完成\" })\r\n    public comBoNode: cc.Node = undefined;\r\n\r\n    @property({ type: cc.Label, visible: true, displayName: \"连击数字\" })\r\n    public numLable: cc.Label = undefined;\r\n\r\n    @property({ type: cc.Sprite, visible: true, displayName: \"连击描述\" })\r\n    public describe: cc.Sprite = undefined;\r\n\r\n    @property({ type: [cc.SpriteFrame], visible: true, displayName: \"连击描述图片\" })\r\n    public frameArr: Array<cc.SpriteFrame> = [];\r\n\r\n    @property({ type: [cc.SpriteFrame], visible: true, displayName: \"背景图片\" })\r\n    public BgArr: Array<cc.SpriteFrame> = [];\r\n\r\n    @property({ type: [cc.Node], visible: true, displayName: \"符号节点\" })\r\n    public singNode: Array<cc.Node> = [];\r\n\r\n    private state: ComboState = ComboState.normal;\r\n\r\n\r\n    /**\r\n     * 连击设置\r\n     * @param num 连击数\r\n     */\r\n    public setCombo(num: number) {\r\n\r\n        this.setState();\r\n        if(this.state == ComboState.crazy)\r\n            return;\r\n        this.normalNode.active = num == 1;\r\n        this.comBoNode.active = num != 1;\r\n        this.initCombo(num);\r\n    }\r\n\r\n    /**\r\n     * 连击初始化\r\n     * @param num 连击数\r\n     */\r\n    private initCombo(num: number) {\r\n        if (num == 1)\r\n            return;\r\n        this.numLable.string = num.toString();\r\n        let frameSlect = 0;\r\n        if (num == 10)\r\n            frameSlect = 3;\r\n        else if (num > 7)\r\n            frameSlect = 2;\r\n        else if (num > 4)\r\n            frameSlect = 1;\r\n        this.describe.spriteFrame = this.frameArr[frameSlect];\r\n    }\r\n\r\n    /**\r\n     * 设置状态\r\n     */\r\n    private setState() {\r\n        let value = GameCtrl.instance.crazy ? ComboState.crazy : ComboState.normal;\r\n        if (this.state != value) {\r\n            this.node.getComponent(cc.Sprite).spriteFrame = this.BgArr[value];\r\n            this.singNode[0].active = 0 == value;\r\n            this.singNode[1].active = 1 == value;\r\n            if (value == ComboState.crazy) {\r\n                this.normalNode.active = false;\r\n                this.comBoNode.active = true;\r\n                this.numLable.string = GameCtrl.instance.crazyComboAdd.toString();\r\n            }\r\n            this.state = value;\r\n        }\r\n    }\r\n}"]}